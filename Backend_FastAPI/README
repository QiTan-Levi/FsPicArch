# FsPicArch - Backend å®Œæ•´æ–‡æ¡£

## ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/QiTan-Levi/FsPicArch.git
cd FsPicArch/Backend_FastAPI

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
uvicorn main:app --reload
```

è®¿é—® `http://localhost:8000/docs` æŸ¥çœ‹äº¤äº’å¼APIæ–‡æ¡£

## âš™ åŸºç¡€é…ç½®

```python
# config.py å…³é”®é…ç½®
DB_CONFIG = {
    'host': '127.0.0.1',    # æ•°æ®åº“åœ°å€
    'port': 3306,           # æ•°æ®åº“ç«¯å£
    'user': 'fspic_user',   # æ•°æ®åº“ç”¨æˆ·
    'password': 'your_strong_password',  # å¿…é¡»ä¿®æ”¹ï¼
    'database': 'fspicarch'
}

# JWTé…ç½®
JWT_SECRET = 'change_this_to_random_string'  # å¿…é¡»ä¿®æ”¹ï¼
TOKEN_EXPIRE_MINUTES = 1440  # 24å°æ—¶
```

## ğŸŒŸ åŠŸèƒ½çŸ©é˜µ

### å·²å®ç°åŠŸèƒ½

#### ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- OAuth2è®¤è¯æµç¨‹
- ç”¨æˆ·ç™»å½•/ç™»å‡º
- JWTä»¤ç‰Œç”Ÿæˆä¸éªŒè¯
- å¯†ç å“ˆå¸Œä¸éªŒè¯

#### ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œ
- è·å–/æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- å¤´åƒä¸Šä¼ 
- ç”¨æˆ·æ³¨é”€

#### åŸºç¡€æœåŠ¡
- æ•°æ®åº“æœåŠ¡
- æ–‡ä»¶ä¸Šä¼ å¤„ç†
- é‚®ä»¶æœåŠ¡
- é™æ€æ–‡ä»¶æœåŠ¡

#### ç³»ç»ŸåŸºç¡€
- FastAPIåº”ç”¨æ¡†æ¶
- é…ç½®ç®¡ç†ç³»ç»Ÿ
- æ•°æ®åº“æ¨¡å‹
- APIæ–‡æ¡£ç”Ÿæˆ

### å¼€å‘çŠ¶æ€

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | æ–‡æ¡£é“¾æ¥ |
| -------- | ---- | -------- |
| ç”¨æˆ·è®¤è¯ | âœ… | #ç”¨æˆ·è®¤è¯ç³»ç»Ÿ |
| å›¾ç‰‡ä¸Šä¼  | ğŸš§ | #å›¾ç‰‡ç®¡ç†api |
| æ•°æ®ç»Ÿè®¡ | âŒ | #åç»­å¼€å‘è®¡åˆ’ |

## API å¼€å‘ Checklist

### ç”¨æˆ·è®¤è¯ç›¸å…³API
- [x] `POST /register` - ç”¨æˆ·æ³¨å†Œ
- [x] `POST /login` - ç”¨æˆ·ç™»å½•
- [x] `POST /logout` - ç”¨æˆ·ç™»å‡º
- [ ] `POST /verify-email` - éªŒè¯é‚®ç®±
- [ ] `POST /forgot-password` - å¿˜è®°å¯†ç è¯·æ±‚

### ç”¨æˆ·ç®¡ç†API
#### ç”¨æˆ·ä¿¡æ¯
- [ ] `GET ` - è·å–ç”¨æˆ·åˆ—è¡¨(ç®¡ç†å‘˜)
- [ ] `GET /{id}` - è·å–ç‰¹å®šç”¨æˆ·ä¿¡æ¯
- [ ] `GET /me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- [ ] `PUT /{id}` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- [ ] `PATCH /{id}/status` - æ›´æ–°ç”¨æˆ·çŠ¶æ€(ç®¡ç†å‘˜)
- [ ] `PATCH /{id}/permission` - æ›´æ–°ç”¨æˆ·æƒé™(ç®¡ç†å‘˜)
- [ ] `DELETE /{id}` - åˆ é™¤ç”¨æˆ·(ç®¡ç†å‘˜æˆ–è‡ªå·±)

#### ç”¨æˆ·ç»Ÿè®¡
- [ ] `GET /{id}/stats` - è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
- [ ] `GET /{id}/activity` - è·å–ç”¨æˆ·æ´»åŠ¨æ‘˜è¦

### å›¾ç‰‡ç®¡ç†API
#### èˆªç©ºå›¾ç‰‡
- [ ] `POST /aviation-images` - ä¸Šä¼ èˆªç©ºå›¾ç‰‡
- [ ] `GET /aviation-images` - è·å–èˆªç©ºå›¾ç‰‡åˆ—è¡¨
- [ ] `GET /aviation-images/{id}` - è·å–ç‰¹å®šèˆªç©ºå›¾ç‰‡è¯¦æƒ…
- [ ] `PUT /aviation-images/{id}` - æ›´æ–°èˆªç©ºå›¾ç‰‡ä¿¡æ¯
- [ ] `PATCH /aviation-images/{id}/status` - æ›´æ–°å®¡æ ¸çŠ¶æ€(å®¡å›¾å‘˜)
- [ ] `DELETE /aviation-images/{id}` - åˆ é™¤èˆªç©ºå›¾ç‰‡

#### é“è·¯å›¾ç‰‡
- [ ] `POST /railway-images` - ä¸Šä¼ é“è·¯å›¾ç‰‡
- [ ] `GET /railway-images` - è·å–é“è·¯å›¾ç‰‡åˆ—è¡¨
- [ ] `GET /railway-images/{id}` - è·å–ç‰¹å®šé“è·¯å›¾ç‰‡è¯¦æƒ…
- [ ] `PUT /railway-images/{id}` - æ›´æ–°é“è·¯å›¾ç‰‡ä¿¡æ¯
- [ ] `PATCH /railway-images/{id}/status` - æ›´æ–°å®¡æ ¸çŠ¶æ€(å®¡å›¾å‘˜)
- [ ] `DELETE /railway-images/{id}` - åˆ é™¤é“è·¯å›¾ç‰‡

#### å›¾ç‰‡é€šç”¨æ“ä½œ
- [ ] `POST /images/{type}/{id}/like` - ç‚¹èµå›¾ç‰‡
- [ ] `DELETE /images/{type}/{id}/like` - å–æ¶ˆç‚¹èµ
- [ ] `GET /images/{type}/{id}/comments` - è·å–å›¾ç‰‡è¯„è®º
- [ ] `POST /images/{type}/{id}/comments` - æ·»åŠ è¯„è®º

### æœºä½ç®¡ç†API
- [ ] `POST /spots` - åˆ›å»ºæœºä½ä¿¡æ¯
- [ ] `GET /spots` - è·å–æœºä½åˆ—è¡¨
- [ ] `GET /spots/{id}` - è·å–ç‰¹å®šæœºä½è¯¦æƒ…
- [ ] `PUT /spots/{id}` - æ›´æ–°æœºä½ä¿¡æ¯
- [ ] `PATCH /spots/{id}/status` - æ›´æ–°æœºä½çŠ¶æ€
- [ ] `DELETE /spots/{id}` - åˆ é™¤æœºä½ä¿¡æ¯

### å‹‹ç« ç®¡ç†API
- [ ] `POST /medals` - æˆäºˆå‹‹ç« (ç®¡ç†å‘˜)
- [ ] `GET /{id}/medals` - è·å–ç”¨æˆ·å‹‹ç« åˆ—è¡¨
- [ ] `GET /medals/{id}` - è·å–ç‰¹å®šå‹‹ç« è¯¦æƒ…
- [ ] `PATCH /medals/{id}/status` - æ›´æ–°å‹‹ç« çŠ¶æ€(ç®¡ç†å‘˜)
- [ ] `DELETE /medals/{id}` - æ’¤é”€å‹‹ç« (ç®¡ç†å‘˜)

### è®¸å¯è¯ç®¡ç†API
- [ ] `POST /licenses` - ç­¾å‘è®¸å¯è¯(ç®¡ç†å‘˜)
- [ ] `GET /{id}/licenses` - è·å–ç”¨æˆ·è®¸å¯è¯åˆ—è¡¨
- [ ] `GET /licenses/{id}` - è·å–ç‰¹å®šè®¸å¯è¯è¯¦æƒ…
- [ ] `PATCH /licenses/{id}/status` - æ›´æ–°è®¸å¯è¯çŠ¶æ€(ç®¡ç†å‘˜)
- [ ] `DELETE /licenses/{id}` - æ’¤é”€è®¸å¯è¯(ç®¡ç†å‘˜)
- [ ] `POST /licenses/{id}/use` - ä½¿ç”¨è®¸å¯è¯

### è¯„è®ºç®¡ç†API
- [ ] `GET /comments/{id}` - è·å–è¯„è®ºè¯¦æƒ…
- [ ] `PUT /comments/{id}` - æ›´æ–°è¯„è®º
- [ ] `PATCH /comments/{id}/status` - æ›´æ–°è¯„è®ºçŠ¶æ€
- [ ] `DELETE /comments/{id}` - åˆ é™¤è¯„è®º
- [ ] `POST /comments/{id}/like` - ç‚¹èµè¯„è®º
- [ ] `DELETE /comments/{id}/like` - å–æ¶ˆç‚¹èµè¯„è®º
- [ ] `GET /comments/{id}/replies` - è·å–è¯„è®ºå›å¤

### ç”³è¯‰å¼‚è®®API
- [ ] `POST /complaints` - æäº¤ç”³è¯‰æˆ–å¼‚è®®
- [ ] `GET /complaints` - è·å–ç”³è¯‰å¼‚è®®åˆ—è¡¨(ç®¡ç†å‘˜)
- [ ] `GET /complaints/{id}` - è·å–ç”³è¯‰å¼‚è®®è¯¦æƒ…
- [ ] `PATCH /complaints/{id}/status` - å¤„ç†ç”³è¯‰å¼‚è®®(ç®¡ç†å‘˜)
- [ ] `GET /{id}/complaints` - è·å–ç”¨æˆ·ç”³è¯‰å¼‚è®®å†å²

### ç³»ç»Ÿç®¡ç†API
#### ç³»ç»Ÿæ—¥å¿—
- [ ] `GET /logs` - è·å–ç³»ç»Ÿæ—¥å¿—(ç®¡ç†å‘˜)
- [ ] `GET /logs/users/{id}` - è·å–ç”¨æˆ·æ“ä½œæ—¥å¿—(ç®¡ç†å‘˜)

#### æœªé€šè¿‡å›¾ç‰‡
- [ ] `GET /rejected-images` - è·å–æœªé€šè¿‡å›¾ç‰‡åˆ—è¡¨(ç®¡ç†å‘˜æˆ–æ‰€æœ‰è€…)
- [ ] `GET /rejected-images/{id}` - è·å–æœªé€šè¿‡å›¾ç‰‡è¯¦æƒ…
- [ ] `POST /rejected-images/{id}/resubmit` - é‡æ–°æäº¤å›¾ç‰‡
- [ ] `POST /rejected-images/{id}/appeal` - å¯¹æ‹’ç»ç»“æœç”³è¯‰

### å…¶ä»–å®ç”¨API
- [ ] `GET /search` - å…¨å±€æœç´¢
- [ ] `GET /tags` - è·å–çƒ­é—¨æ ‡ç­¾
- [ ] `GET /stats` - è·å–ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯
- [ ] `POST /contact` - è”ç³»ç®¡ç†å‘˜

### ğŸ”§ ä¼˜åŒ–å»ºè®®

#### å®‰å…¨ä¼˜åŒ–
- å¢åŠ å¯†ç å¼ºåº¦æ£€æŸ¥ï¼ˆæ³¨å†Œæ—¶ï¼‰
- å®ç°JWTåˆ·æ–°ä»¤ç‰Œæœºåˆ¶
- æ·»åŠ æ•æ„Ÿæ“ä½œçš„åŒå› ç´ è®¤è¯
- å®ç°ç™»å½•å¤±è´¥é”å®šæœºåˆ¶

#### æ€§èƒ½ä¼˜åŒ–
- æ•°æ®åº“è¿æ¥æ± ï¼ˆæ›¿æ¢å½“å‰ç”Ÿæˆå™¨æ–¹å¼ï¼‰
- æ·»åŠ Redisç¼“å­˜é«˜é¢‘è®¿é—®æ•°æ®
- å®ç°å¼‚æ­¥æ–‡ä»¶å¤„ç†
- é‚®ä»¶å‘é€é˜Ÿåˆ—åŒ–

#### ä»£ç ç»“æ„ä¼˜åŒ–
- å°†è·¯ç”±æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†æ›´ç»†
- æŠ½è±¡é€šç”¨CRUDæ“ä½œ
- ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
- æ·»åŠ APIç‰ˆæœ¬æ§åˆ¶

### ğŸš§ åç»­å¼€å‘è®¡åˆ’

#### ç¬¬ä¸€é˜¶æ®µï¼šå®Œå–„åŸºç¡€åŠŸèƒ½ï¼ˆ1-2å‘¨ï¼‰
- é‚®ç®±éªŒè¯
- å¯†ç é‡ç½®æµç¨‹
- ç”¨æˆ·èµ„æ–™å®Œæ•´åº¦æ£€æŸ¥
- å¼€å‘ç®¡ç†åå°åŸºç¡€

#### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰
- å®ç°èˆªç©º/é“è·¯å›¾ç‰‡ä¸Šä¼ 
- å¼€å‘å›¾ç‰‡é¢„å¤„ç†ï¼ˆå‹ç¼©/æ°´å°ï¼‰
- å»ºç«‹å®¡æ ¸æµç¨‹
- å¼€å‘åŸºç¡€ç¤¾äº¤åŠŸèƒ½ï¼ˆç‚¹èµ/è¯„è®º/å…³æ³¨ï¼‰

#### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ3-4å‘¨ï¼‰
- å®ç°é«˜çº§æœç´¢
- æ¨èç®—æ³•
- ç”¨æˆ·è¡Œä¸ºåˆ†æ
- ç³»ç»Ÿä½¿ç”¨ç»Ÿè®¡

#### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–ä¸æ‰©å±•
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥
- è´Ÿè½½æµ‹è¯•
- APIç¬¬ä¸‰æ–¹æ¥å…¥

## ğŸ¤ å‚ä¸è´¡çŒ®

1. Fork ä»“åº“
2. åˆ›å»ºåˆ†æ”¯ (`git checkout -b feat/your-feature`)
3. æäº¤ä»£ç  (`git commit -am 'Add awesome feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feat/your-feature`)
5. åˆ›å»º Pull Request

## ğŸ“œ å¼€æºè®¸å¯

MIT Licensed | Â© 2025 FsPicArch Team